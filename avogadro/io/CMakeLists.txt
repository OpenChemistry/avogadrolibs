find_package(Eigen3 REQUIRED)
find_package(HDF5 REQUIRED COMPONENTS C)
# Add as "system headers" to avoid warnings generated by them with
# compilers that support that notion.
include_directories(SYSTEM "${EIGEN3_INCLUDE_DIR}"
  "${HDF5_INCLUDE_DIRS}"
  "${AvogadroLibs_SOURCE_DIR}/thirdparty/pugixml"
  "${AvogadroLibs_SOURCE_DIR}/thirdparty/jsoncpp")

if(AvogadroLibs_NEEDS_BOOST)
  # The libraries will be in the interface libraries, just need includes.
  include_directories(SYSTEM ${AvogadroLibs_BOOST_INCLUDE_DIRS})
endif()

set(HEADERS
  cjsonformat.h
  cmlformat.h
  fileformat.h
  fileformatmanager.h
  hdf5dataformat.h
  utilities.h
  xyzformat.h
)

set(SOURCES
  cjsonformat.cpp
  cmlformat.cpp
  fileformat.cpp
  fileformatmanager.cpp
  hdf5dataformat.cpp
  xyzformat.cpp
)

# Ever feel like you should just take the modular build system?
include_directories("${CMAKE_CURRENT_BINARY_DIR}/../core")

avogadro_add_library(AvogadroIO ${HEADERS} ${SOURCES})

# hdf5 is the HDF5 imported target
target_link_libraries(AvogadroIO LINK_PUBLIC AvogadroCore LINK_PRIVATE hdf5)
